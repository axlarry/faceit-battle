
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LaCurte.ro Faceit-Tools</title>
    <meta name="description" content="LaCurte.ro Community Ranking" />
    <meta name="author" content="Larry" />

    <meta property="og:title" content="LaCurte.ro Faceit-Tools" />
    <meta property="og:description" content="LaCurte.ro Community Ranking" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="./waha.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@LaCurte" />
    <meta name="twitter:image" content="./waha.png" />

    <!-- Discord Activity friendly headers -->
    <meta http-equiv="X-Frame-Options" content="ALLOWALL" />
    <meta name="referrer" content="unsafe-url" />
    
    <script>
      // Discord compatibility initialization
      if (typeof document !== 'undefined') {
        // Detect Discord environment more reliably
        const isDiscordEnvironment = 
          window.parent !== window ||
          window.location.href.includes('discord.com') ||
          window.location.href.includes('discordsays.com') ||
          window.location.href.includes('discordapp.com') ||
          document.referrer.includes('discord.com') ||
          document.referrer.includes('discordapp.com') ||
          window.location.search.includes('frame_id') ||
          window.location.search.includes('instance_id') ||
          window.location.hostname.includes('discordsays.com') ||
          window.location.hostname.includes('discordapp.com') ||
          navigator.userAgent.includes('Discord') ||
          window.top !== window.self;

        if (isDiscordEnvironment) {
          console.log('ðŸŽ® Discord environment detected - initializing compatibility mode');
          
          // Handle CSP violations gracefully - prevent them from breaking the app
          window.addEventListener('securitypolicyviolation', function(e) {
            console.warn('ðŸ”’ CSP Violation (expected in Discord):', {
              directive: e.violatedDirective,
              blockedURI: e.blockedURI
            });
            // Prevent the error from propagating
            e.preventDefault();
          });

          // Handle unhandled promise rejections from blocked requests
          window.addEventListener('unhandledrejection', function(e) {
            if (e.reason && e.reason.message && 
                (e.reason.message.includes('CSP') || 
                 e.reason.message.includes('Content Security Policy') ||
                 e.reason.message.includes('blocked'))) {
              console.warn('ðŸ”’ CSP-related promise rejection handled:', e.reason.message);
              e.preventDefault();
            }
          });
          
          // Set immediate Discord-friendly styles
          document.documentElement.style.backgroundColor = '#0d1117';
          document.documentElement.style.color = 'white';
          document.body.style.backgroundColor = '#0d1117';
          document.body.style.color = 'white';
          document.body.style.margin = '0';
          document.body.style.padding = '0';
        }
      }
    </script>
  </head>

  <body style="background-color: #0d1117; color: white; margin: 0; padding: 0;">
    <div id="root" style="background-color: #0d1117; color: white; min-height: 100vh; width: 100%;"></div>
    
    <!-- Only load external scripts if NOT in Discord environment -->
    <script>
      // Check if we're in Discord before loading external scripts
      const isDiscordEnvironment = 
        window.parent !== window ||
        window.location.href.includes('discord.com') ||
        window.location.href.includes('discordsays.com') ||
        window.location.href.includes('discordapp.com') ||
        document.referrer.includes('discord.com') ||
        document.referrer.includes('discordapp.com') ||
        window.location.search.includes('frame_id') ||
        window.location.search.includes('instance_id') ||
        window.location.hostname.includes('discordsays.com') ||
        window.location.hostname.includes('discordapp.com') ||
        navigator.userAgent.includes('Discord') ||
        window.top !== window.self;

      if (!isDiscordEnvironment) {
        // Only load GPTEng script outside of Discord
        const script = document.createElement('script');
        script.src = 'https://cdn.gpteng.co/gptengineer.js';
        script.type = 'module';
        document.body.appendChild(script);
        console.log('ðŸ“¦ External scripts loaded (non-Discord environment)');
      } else {
        console.log('ðŸŽ® Skipping external scripts in Discord environment');
      }
    </script>
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
